{"version":3,"sources":["./src/app/pages/employee-dashboard/employee-dashboard-routing.module.ts","./src/app/pages/employee-dashboard/employee-dashboard.module.ts","./src/app/pages/employee-dashboard/employee-dashboard.page.ts","./src/app/pages/employee-dashboard/employee-dashboard.page.scss","./src/app/pages/employee-dashboard/employee-dashboard.page.html"],"names":[],"mappings":"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","file":"src_app_pages_employee-dashboard_employee-dashboard_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { EmployeeDashboardPage } from './employee-dashboard.page';\r\nimport {IonicModule} from \"@ionic/angular\";\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EmployeeDashboardPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [RouterModule.forChild(routes), IonicModule],\r\n  exports: [RouterModule],\r\n})\r\nexport class EmployeeDashboardPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { EmployeeDashboardPageRoutingModule } from './employee-dashboard-routing.module';\r\n\r\nimport { EmployeeDashboardPage } from './employee-dashboard.page';\r\nimport {SharedModule} from \"../../services/shared.module\";\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    EmployeeDashboardPageRoutingModule,\r\n    SharedModule\r\n  ],\r\n  declarations: [EmployeeDashboardPage]\r\n})\r\nexport class EmployeeDashboardPageModule {}\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport { forkJoin, Subject, Subscription} from \"rxjs\";\r\nimport { debounceTime, filter, switchMap, take, tap} from \"rxjs/operators\";\r\nimport {PersonResourceService} from \"../../services/api-services/person-resource.service\";\r\nimport {QrScanComponent} from \"../../components/qr-scan/qr-scan.component\";\r\nimport {ModalController, ToastController} from \"@ionic/angular\";\r\nimport {Person} from \"../../services/model\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\nimport {CommonStateService} from \"../../services/common-state.service\";\r\n\r\n@Component({\r\n  selector: 'app-employee-dashboard',\r\n  templateUrl: './employee-dashboard.page.html',\r\n  styleUrls: ['./employee-dashboard.page.scss'],\r\n})\r\nexport class EmployeeDashboardPage implements OnInit, OnDestroy {\r\n\r\n  /** @internal */\r\n  showMobileMenu = true;\r\n\r\n  triggerServerCall$ = new Subject<string>();\r\n  private modal: HTMLIonModalElement;\r\n  resetControls = new Subject<void>();\r\n\r\n  constructor(private employeeService: PersonResourceService,\r\n              private toastContrl: ToastController,\r\n              private modalController: ModalController,\r\n              private router: Router,\r\n              private activatedRoute: ActivatedRoute,\r\n              private state: CommonStateService) {\r\n  }\r\n\r\n  subscriptions: Subscription[] = [];\r\n  personResults: Person[] = [];\r\n\r\n  ngOnInit() {\r\n    this.subscriptions.push(\r\n      this.state.getSplitPaneVisible().subscribe(\r\n        (isVisible) => this.showMobileMenu = !isVisible\r\n      )\r\n    )\r\n\r\n    this.subscriptions.push(\r\n      this.triggerServerCall$.pipe(\r\n        debounceTime(500),\r\n        tap(()=> this.personResults = []),\r\n        filter((searchValue) => !!searchValue && !!searchValue.trim()),\r\n        switchMap((searchValue) => {\r\n          return forkJoin([\r\n            this.employeeService.getPersonByName(searchValue),\r\n            this.employeeService.getPersonByCode(searchValue)])\r\n        })\r\n      ).subscribe(([personByNAme, personByCode]) => {\r\n        this.personResults = personByNAme\r\n        if (!!personByCode && personByCode !== 'NOT_FOUND') {\r\n          this.navigateToSummaryPage(personByCode as Person);\r\n        }\r\n      })\r\n    )\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscriptions.forEach(s => s.unsubscribe());\r\n  }\r\n\r\n  onScanClicked(event: any) {\r\n    this.presentModal();\r\n  }\r\n\r\n  async presentModal() {\r\n    this.modal = await this.modalController.create({\r\n      component: QrScanComponent,\r\n      componentProps: {\r\n        \"cancelClicked\": () => this.modal.dismiss(),\r\n        \"qrCodeRead\": this.modalResult.bind(this)\r\n      }\r\n    });\r\n    return await this.modal.present();\r\n  }\r\n\r\n  modalResult(value: string) {\r\n    this.employeeService.getPersonByCode(value).subscribe(async (employee) => {\r\n      await this.modal.dismiss();\r\n\r\n      if (!!employee && employee !== 'NOT_FOUND') {\r\n        this.navigateToSummaryPage(employee as Person);\r\n      } else {\r\n        const p = await this.toastContrl.create({color:\"danger\", duration:2000, message:\"\" +\r\n            \"Element mit diesem Code wurde nicht gefunden\",\r\n        });\r\n        p.present();\r\n\r\n        // this.modal.present();\r\n      }\r\n    })\r\n  }\r\n\r\n  navigateToSummaryPage(employee: Person): void {\r\n    this.personResults = []\r\n    this.resetControls.next();\r\n    this.activatedRoute.queryParams.pipe(take(1)).subscribe(params =>{\r\n      this.router.navigate(['booking-summary'], {queryParams:{\r\n          isOpenBooking: params.isOpenBooking,\r\n          personId: employee.dynamic_id,\r\n          itemId: params.itemId\r\n        }});\r\n    })\r\n  }\r\n\r\n  onValueChange(value: string) {\r\n    this.triggerServerCall$.next(value)\r\n  }\r\n\r\n\r\n  personSelected(person: Person) {\r\n    this.navigateToSummaryPage(person);\r\n  }\r\n\r\n  goBack() {\r\n    window.history.back();\r\n  }\r\n}\r\n","export default \".employee-page-vertical {\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.employee-page-horizontal {\\n  display: flex;\\n  flex-direction: row;\\n  align-content: center;\\n  justify-content: center;\\n}\\n\\n.employee-page-qr-header {\\n  max-width: 400px;\\n  padding: 1rem;\\n}\\n\\n.employee-page-content-wrapper {\\n  margin: 2rem;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: flex-start;\\n  flex: 1 1;\\n  border: 3px solid var(--ion-color-light);\\n  border-radius: 2px;\\n  color: var(--ion-color-medium);\\n  min-height: 400px;\\n}\\n\\n.employee-page-note-content {\\n  flex-grow: 1;\\n  width: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.employee-page-result-list {\\n  width: 100%;\\n}\\n\\n.employee-page-result {\\n  cursor: pointer;\\n}\\n\\n.employee-page-result:hover {\\n  --ion-item-background: #ECECECFF !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVtcGxveWVlLWRhc2hib2FyZC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0VBQ0EsYUFBQTtFQUNBLHNCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxxQkFBQTtFQUNBLHVCQUFBO0FBQ0Y7O0FBR0E7RUFDRSxnQkFBQTtFQUNBLGFBQUE7QUFBRjs7QUFJQTtFQUNFLFlBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSwyQkFBQTtFQUNBLHVCQUFBO0VBQ0EsU0FBQTtFQUNBLHdDQUFBO0VBQ0Esa0JBQUE7RUFDQSw4QkFBQTtFQUNBLGlCQUFBO0FBREY7O0FBSUE7RUFDRSxZQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FBREY7O0FBR0E7RUFDRSxXQUFBO0FBQUY7O0FBRUE7RUFDRSxlQUFBO0FBQ0Y7O0FBQUU7RUFDRSwyQ0FBQTtBQUVKIiwiZmlsZSI6ImVtcGxveWVlLWRhc2hib2FyZC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZW1wbG95ZWUtcGFnZS12ZXJ0aWNhbCB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxufVxyXG5cclxuLmVtcGxveWVlLXBhZ2UtaG9yaXpvbnRhbCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxufVxyXG5cclxuXHJcbi5lbXBsb3llZS1wYWdlLXFyLWhlYWRlciB7XHJcbiAgbWF4LXdpZHRoOiA0MDBweDtcclxuICBwYWRkaW5nOiAxcmVtO1xyXG5cclxufVxyXG5cclxuLmVtcGxveWVlLXBhZ2UtY29udGVudC13cmFwcGVyIHtcclxuICBtYXJnaW46IDJyZW07XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcclxuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcclxuICBmbGV4OiAxIDE7XHJcbiAgYm9yZGVyOiAzcHggc29saWQgdmFyKC0taW9uLWNvbG9yLWxpZ2h0KTtcclxuICBib3JkZXItcmFkaXVzOiAycHg7XHJcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xyXG4gIG1pbi1oZWlnaHQ6IDQwMHB4O1xyXG59XHJcblxyXG4uZW1wbG95ZWUtcGFnZS1ub3RlLWNvbnRlbnR7XHJcbiAgZmxleC1ncm93OiAxO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxufVxyXG4uZW1wbG95ZWUtcGFnZS1yZXN1bHQtbGlzdHtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG4uZW1wbG95ZWUtcGFnZS1yZXN1bHR7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICY6aG92ZXJ7XHJcbiAgICAtLWlvbi1pdGVtLWJhY2tncm91bmQ6ICNFQ0VDRUNGRiAhaW1wb3J0YW50O1xyXG4gIH1cclxufVxyXG4iXX0= */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons\\r\\n      *ngIf=\\\"this.showMobileMenu\\\"\\r\\n      slot=\\\"start\\\" class=\\\"back-button\\\" (click)=\\\"goBack()\\\">\\r\\n      <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back-outline\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n    <ion-title>An Mitarbeiter ausgeben</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"equipment-page-vertical\\\">\\r\\n    <div class=\\\"employee-page-horizontal\\\">\\r\\n      <p class=\\\"employee-page-qr-header\\\">\\r\\n        QR Code des Mitarbeiters für die Ausgabe Scannen oder eintippen.\\r\\n        Alternativ kann nach Name des Mitarbeiters gesucht werden\\r\\n      </p>\\r\\n    </div>\\r\\n\\r\\n    <app-qr-control placeholder=\\\"Name / QR Code\\\"\\r\\n                    (onQrClick)=\\\"onScanClicked($event)\\\"\\r\\n                    [showContinueButton]=\\\"false\\\"\\r\\n                    (onValueInputChange)=\\\"onValueChange($event)\\\"\\r\\n                    [resetControls]=\\\"this.resetControls\\\"\\r\\n                    cy-data=\\\"QR-Code\\\"\\r\\n    ></app-qr-control>\\r\\n\\r\\n    <div class=\\\"employee-page-content-wrapper\\\">\\r\\n      <!-- List of Text Items -->\\r\\n      <ion-list class=\\\"employee-page-result-list\\\" *ngIf=\\\"personResults.length > 0; else noResultTemplate\\\">\\r\\n        <ion-item cy-data=\\\"person-result\\\" class=\\\"employee-page-result\\\" *ngFor=\\\"let person of personResults\\\" (click)=\\\"personSelected(person)\\\">\\r\\n          <ion-label>{{ person.firstname + ' ' + person.lastname }}</ion-label>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n\\r\\n      <ng-template #noResultTemplate >\\r\\n        <div class=\\\"employee-page-note-content\\\"> <p>Keine Ergebnisse</p></div>\\r\\n      </ng-template>\\r\\n    </div>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\";"],"sourceRoot":"webpack:///"}